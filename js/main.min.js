$(function(){"use strict";function i(){var t=new $.RestClient("/steam-weeklong-deals/api/");e=t.add("sale"),n=t.add("details",{isSingle:!0}),n.add("app"),n.add("sub")}function d(t){var e=t.indexOf("?"),n=t.substring(0,-1!==e?e:t.length);return n.lastIndexOf("/")===n.length-1&&(n=n.substring(0,n.lastIndexOf("/"))),n}function l(t,e){return $("<a>",{href:t,text:e,target:"_blank"}).wrapAll("<div>").parent().html()}function s(e,i){var s=$(i),r=d(s.find("a").attr("href")),f=r.lastIndexOf("/"),o=r.substring(f+1),u=l(r,o),c=s.find(".info .percent").first().text(),h=s.find(".info .price span.was").first().text(),p=s.find(".info .price span").last().text(),g=r.substring(f-3,f);n[g].read(o).done(function(e){var n=$(e.html).find("h4").first().text();a.push([u,n,c,h,p]),$("#load-count").html("Loaded "+a.length+" of "+t.length+" entries...")})}function r(){e.read("weeklongdeals").done(function(e){t=$(e.html).find(".item"),t.each(s)})}function f(){$(document).ajaxStop(function(){$("#ajax-loader").hide(),$("#deals-table").dataTable({data:a,columns:[{title:"App ID"},{title:"Name"},{title:"Percent"},{title:"Was"},{title:"Now"}]}),$(".show-on-load").removeClass("hidden")})}function o(){i(),r(),f()}var t,e,n,a=[];o()});